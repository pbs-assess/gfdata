<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get all data — get_all_survey_samples • gfdata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get all data — get_all_survey_samples"><meta name="description" content="These functions get all survey set or sample data for a set of species by
major area, activity, or specific surveys. The main functions in this package
focus on retrieving the more commonly used typs of data and are often limited
to sets and samples that conform to current design-based standards and survey
grids. These functions will retrieve everything and therefore require careful
consideration of what data types are reasonable to include depending on the
purpose. For this reason these function return a lot of columns, although the
exact number depends on which types of surveys are being returned."><meta property="og:description" content="These functions get all survey set or sample data for a set of species by
major area, activity, or specific surveys. The main functions in this package
focus on retrieving the more commonly used typs of data and are often limited
to sets and samples that conform to current design-based standards and survey
grids. These functions will retrieve everything and therefore require careful
consideration of what data types are reasonable to include depending on the
purpose. For this reason these function return a lot of columns, although the
exact number depends on which types of surveys are being returned."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gfdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/gfdata-vignette-get-all.html">Using 'get_all' functions</a></li>
    <li><a class="dropdown-item" href="../articles/gfdata-vignette.html">Introduction to gfdata</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pbs-assess/gfdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get all data</h1>
      <small class="dont-index">Source: <a href="https://github.com/pbs-assess/gfdata/blob/master/R/get-all-survey-samples.R" class="external-link"><code>R/get-all-survey-samples.R</code></a>, <a href="https://github.com/pbs-assess/gfdata/blob/master/R/get-all-survey-sets.R" class="external-link"><code>R/get-all-survey-sets.R</code></a></small>
      <div class="d-none name"><code>get_all.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions get all survey set or sample data for a set of species by
major area, activity, or specific surveys. The main functions in this package
focus on retrieving the more commonly used typs of data and are often limited
to sets and samples that conform to current design-based standards and survey
grids. These functions will retrieve everything and therefore require careful
consideration of what data types are reasonable to include depending on the
purpose. For this reason these function return a lot of columns, although the
exact number depends on which types of surveys are being returned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_all_survey_samples</span><span class="op">(</span></span>
<span>  <span class="va">species</span>,</span>
<span>  ssid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  major <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  usability <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unsorted_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  random_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  grouping_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keep_all_ages <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_event_info <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_activity_matches <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_bad_data <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_duplicates <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  return_dna_info <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return_specimen_type <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  drop_na_columns <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  quiet_option <span class="op">=</span> <span class="st">"message"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_all_survey_sets</span><span class="op">(</span></span>
<span>  <span class="va">species</span>,</span>
<span>  ssid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  major <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  years <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  join_sample_ids <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_false_zeros <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_bad_data <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_duplicates <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_activity_matches <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  usability <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  grouping_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  drop_na_columns <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  quiet_option <span class="op">=</span> <span class="st">"message"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>One or more species common names (e.g. "pacific ocean
perch") or one or more species codes (e.g. <code>396</code>). Species codes can be
specified as numeric vectors <code>c(396, 442</code>) or characters <code>c("396", "442")</code>.
Numeric values shorter than 3 digits will be expanded to 3 digits and
converted to character objects (<code>1</code> turns into <code>"001"</code>). Species common
names and species codes should not be mixed. If any element is missing a
species code, then all elements will be assumed to be species common
names. Does not work with non-numeric species codes, so in those cases the
common name will be needed.</p></dd>


<dt id="arg-ssid">ssid<a class="anchor" aria-label="anchor" href="#arg-ssid"></a></dt>
<dd><p>A numeric vector of survey series IDs. Run <code><a href="lookup.html">get_ssids()</a></code> for a
look-up table of available survey series IDs with surveys series
descriptions. Default is to return all data from all surveys. Some of the
most useful ids include: contemporary trawl (1, 3, 4, 16), historic trawl
(2), IPHC (14), sablefish (35), and HBLL (22, 36, 39, 40).</p></dd>


<dt id="arg-major">major<a class="anchor" aria-label="anchor" href="#arg-major"></a></dt>
<dd><p>Character string (or vector) of major stat area code(s) to
include (characters). Use get_major_areas() to lookup area codes with
descriptions. Default is NULL.</p></dd>


<dt id="arg-usability">usability<a class="anchor" aria-label="anchor" href="#arg-usability"></a></dt>
<dd><p>A vector of usability codes to include. Defaults to NULL,
but typical set for a design-based trawl survey index is <code>c(0, 1, 2, 6)</code>.
IPHC codes may be different to other surveys and the modern Sablefish survey
doesn't seem to assign usabilities.</p></dd>


<dt id="arg-unsorted-only">unsorted_only<a class="anchor" aria-label="anchor" href="#arg-unsorted-only"></a></dt>
<dd><p>Defaults to FALSE, which will return all specimens
collected on research trips. TRUE returns only unsorted (<code>1</code>) and <code>NA</code>
specimens for both <code>species_category_code</code> and <code>sample_source_code</code>.</p></dd>


<dt id="arg-random-only">random_only<a class="anchor" aria-label="anchor" href="#arg-random-only"></a></dt>
<dd><p>Defaults to FALSE, which will return all specimens
collected on research trips. TRUE returns only randomly sampled
specimens (<code>sample_type_code</code> = <code>1, 2, 6, 7, or 8</code>).</p></dd>


<dt id="arg-grouping-only">grouping_only<a class="anchor" aria-label="anchor" href="#arg-grouping-only"></a></dt>
<dd><p>Defaults to FALSE, which will return all specimens or sets
collected on research trips. TRUE returns only sets or specimens from fishing
events with grouping codes that match that expected for a survey. Can also be
achieved by filtering for specimens where <code>!is.na(grouping_code)</code>.</p></dd>


<dt id="arg-keep-all-ages">keep_all_ages<a class="anchor" aria-label="anchor" href="#arg-keep-all-ages"></a></dt>
<dd><p>Defaults to FALSE to keep only ages with standard methods
for all surveys other than the NMFS Triennial.</p></dd>


<dt id="arg-include-event-info">include_event_info<a class="anchor" aria-label="anchor" href="#arg-include-event-info"></a></dt>
<dd><p>Logical for whether to append all relevant fishing
event info (location, timing, effort, catch, etc.). Defaults to TRUE.</p></dd>


<dt id="arg-include-activity-matches">include_activity_matches<a class="anchor" aria-label="anchor" href="#arg-include-activity-matches"></a></dt>
<dd><p>Get all surveys with activity codes that
match chosen ssids.</p></dd>


<dt id="arg-remove-bad-data">remove_bad_data<a class="anchor" aria-label="anchor" href="#arg-remove-bad-data"></a></dt>
<dd><p>Remove known bad data, such as unrealistic
length or weight values and duplications due to trips that include multiple
surveys. Default is TRUE.</p></dd>


<dt id="arg-remove-duplicates">remove_duplicates<a class="anchor" aria-label="anchor" href="#arg-remove-duplicates"></a></dt>
<dd><p>Logical for whether to remove duplicated event
records due to overlapping survey stratifications when original_ind = 'N'.
Default is FALSE. This option only remains possible when ssids are supplied
and activity matches aren't included. Otherwise turns on automatically.</p></dd>


<dt id="arg-return-dna-info">return_dna_info<a class="anchor" aria-label="anchor" href="#arg-return-dna-info"></a></dt>
<dd><p>Should DNA container ids and sample type be returned?
This can create duplication of specimen ids for some species.  Defaults to
FALSE.</p></dd>


<dt id="arg-return-specimen-type">return_specimen_type<a class="anchor" aria-label="anchor" href="#arg-return-specimen-type"></a></dt>
<dd><p>Should non-otolith structure types be returned?
This can create duplication of specimen ids for some species.  Defaults to
FALSE.</p></dd>


<dt id="arg-drop-na-columns">drop_na_columns<a class="anchor" aria-label="anchor" href="#arg-drop-na-columns"></a></dt>
<dd><p>Logical for removing all columns that only contain NAs.
Defaults to TRUE.</p></dd>


<dt id="arg-quiet-option">quiet_option<a class="anchor" aria-label="anchor" href="#arg-quiet-option"></a></dt>
<dd><p>Default option, <code>"message"</code>, suppresses messages from
sections of code with lots of <code>join_by</code> messages. Any other string will allow
messages.</p></dd>


<dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>Default is NULL, which returns all years.</p></dd>


<dt id="arg-join-sample-ids">join_sample_ids<a class="anchor" aria-label="anchor" href="#arg-join-sample-ids"></a></dt>
<dd><p>This option was problematic, so now reverts to FALSE.</p></dd>


<dt id="arg-remove-false-zeros">remove_false_zeros<a class="anchor" aria-label="anchor" href="#arg-remove-false-zeros"></a></dt>
<dd><p>Default of <code>TRUE</code> will make sure weights &gt; 0 don't have
associated counts of 0 and vice versa. Mostly useful for trawl data where
counts are only taken for small catches.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## Import survey catch density and location data by tow or set for plotting</span></span></span>
<span class="r-in"><span><span class="co">## Specify single or multiple species by common name or species code and</span></span></span>
<span class="r-in"><span><span class="co">## single or multiple survey series id(s).</span></span></span>
<span class="r-in"><span><span class="co">## Notes:</span></span></span>
<span class="r-in"><span><span class="co">## `area_km` is the stratum area used in design-based index calculation.</span></span></span>
<span class="r-in"><span><span class="co">## `area_swept` is in m^2 and is used to calculate density for trawl surveys</span></span></span>
<span class="r-in"><span><span class="co">## It is based on `area_swept1` (`doorspread_m` x `tow_length_m`) except</span></span></span>
<span class="r-in"><span><span class="co">## when `tow_length_m` is missing, and then we use `area_swept2`</span></span></span>
<span class="r-in"><span><span class="co">## (`doorspread` x `duration_min` x `speed_mpm`).</span></span></span>
<span class="r-in"><span><span class="co">## `duration_min` is derived in the SQL procedure "proc_catmat_2011" and</span></span></span>
<span class="r-in"><span><span class="co">## differs slightly from the difference between `time_deployed` and</span></span></span>
<span class="r-in"><span><span class="co">## `time_retrieved`.</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elise A. Keppel, Philina A. English, Jillian C. Dunic, Sean C. Anderson, Andrew M. Edwards, Chris Grandin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

